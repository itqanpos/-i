<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>نقطة البيع - إتقان</title>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            --primary: #1a6fd6;
            --bg: #f4f6f9;
            --white: #ffffff;
            --border: #e2e8f0;
            --text: #333;
            --danger: #ef4444;
            --success: #10b981;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; outline: none; }
        body { font-family: 'Tajawal', sans-serif; background: var(--bg); height: 100vh; overflow: hidden; display: flex; flex-direction: column; }

        /* --- الهيدر --- */
        header {
            background: var(--primary);
            color: white;
            padding: 10px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 60px;
        }
        
        .back-btn {
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            padding: 5px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-family: inherit;
            display: flex;
            align-items: center;
            gap: 8px;
            text-decoration: none;
        }
        
        .back-btn:hover { background: rgba(255,255,255,0.3); }

        /* --- التخطيط العام --- */
        .main-layout {
            display: flex;
            height: calc(100vh - 60px);
        }

        /* --- قسم المنتجات (يمين) --- */
        .products-section {
            flex: 2;
            padding: 20px;
            overflow-y: auto;
        }

        .search-bar {
            margin-bottom: 20px;
            position: relative;
        }

        .search-bar input {
            width: 100%;
            padding: 12px 40px 12px 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-family: inherit;
        }

        .search-bar i {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #888;
        }

        .categories {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            overflow-x: auto;
            padding-bottom: 5px;
        }

        .cat-btn {
            background: white;
            border: 1px solid #ddd;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            white-space: nowrap;
            transition: 0.2s;
        }

        .cat-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 15px;
        }

        .product-card {
            background: white;
            border-radius: 10px;
            padding: 10px;
            text-align: center;
            cursor: pointer;
            transition: 0.2s;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            border: 2px solid transparent;
        }

        .product-card:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
        }

        .p-img {
            width: 80px;
            height: 80px;
            background: #eee;
            border-radius: 50%;
            margin: 0 auto 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 30px;
            color: #888;
        }

        .p-name { font-weight: bold; font-size: 14px; margin-bottom: 5px; }
        .p-price { color: var(--primary); font-weight: bold; }

        /* --- قسم السلة (يسار) --- */
        .cart-section {
            flex: 1;
            background: white;
            border-right: 1px solid var(--border);
            display: flex;
            flex-direction: column;
            min-width: 350px;
            max-width: 400px;
            box-shadow: -2px 0 10px rgba(0,0,0,0.05);
        }

        .cart-header {
            padding: 15px;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            font-weight: bold;
            background: #fafafa;
        }

        .cart-items {
            flex: 1;
            overflow-y: auto;
            padding: 10px;
        }

        .cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            border-bottom: 1px dashed #eee;
            animation: fadeIn 0.3s;
        }
        
        @keyframes fadeIn { from { opacity: 0; transform: translateX(-10px); } to { opacity: 1; transform: translateX(0); } }

        .item-info h4 { font-size: 14px; margin-bottom: 3px; }
        .item-info span { font-size: 12px; color: #666; }

        .item-qty {
            display: flex;
            align-items: center;
            gap: 10px;
            background: #f0f0f0;
            border-radius: 5px;
            padding: 2px 5px;
        }

        .qty-btn {
            background: none; border: none; cursor: pointer; color: #555; width: 20px;
        }
        
        .delete-btn {
            color: var(--danger);
            cursor: pointer;
            padding: 5px;
        }

        .cart-footer {
            padding: 20px;
            background: #f9fafb;
            border-top: 1px solid var(--border);
        }

        .summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 14px;
        }

        .total-row {
            display: flex;
            justify-content: space-between;
            font-size: 20px;
            font-weight: bold;
            color: var(--primary);
            margin-top: 10px;
            padding-top: 10px;
            border-top: 2px solid #ddd;
        }

        .pay-btn {
            width: 100%;
            background: var(--success);
            color: white;
            border: none;
            padding: 15px;
            border-radius: 8px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            margin-top: 15px;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
        }
        
        .pay-btn:hover { background: #059669; }

        /* للتجاوب مع الجوال */
        @media (max-width: 768px) {
            .main-layout { flex-direction: column; overflow-y: auto; height: auto; }
            .cart-section { width: 100%; min-width: auto; max-width: none; order: 1; border-top: 2px solid #ddd; }
            .products-section { order: 2; height: 500px; }
        }
    </style>
</head>
<body>

    <header>
        <div style="display: flex; align-items: center; gap: 10px;">
            <i class="fa-solid fa-cash-register fa-lg"></i>
            <h3>نقطة البيع</h3>
        </div>
        <a href="index.html" class="back-btn">
            <i class="fa-solid fa-arrow-right"></i>
            الرئيسية
        </a>
    </header>

    <div class="main-layout">
        
        <div class="cart-section">
            <div class="cart-header">
                <span><i class="fa-solid fa-cart-shopping"></i> السلة الحالية</span>
                <span id="cart-count" style="background: var(--danger); color: white; padding: 2px 8px; border-radius: 10px; font-size: 12px;">0</span>
            </div>
            
            <div class="cart-items" id="cart-items-container">
                <div style="text-align: center; color: #999; margin-top: 50px;">
                    <i class="fa-solid fa-basket-shopping" style="font-size: 40px; margin-bottom: 10px;"></i>
                    <p>السلة فارغة</p>
                </div>
            </div>

            <div class="cart-footer">
                <div class="summary-row">
                    <span>المجموع الفرعي:</span>
                    <span id="sub-total">0.00 ر.س</span>
                </div>
                <div class="summary-row">
                    <span>الضريبة (15%):</span>
                    <span id="tax-total">0.00 ر.س</span>
                </div>
                <div class="total-row">
                    <span>الإجمالي:</span>
                    <span id="grand-total">0.00 ر.س</span>
                </div>
                <button class="pay-btn" onclick="alert('تمت عملية الدفع بنجاح!')">
                    <i class="fa-regular fa-credit-card"></i>
                    دفع
                </button>
            </div>
        </div>

        <div class="products-section">
            <div class="search-bar">
                <i class="fa-solid fa-magnifying-glass"></i>
                <input type="text" id="search-input" placeholder="بحث عن منتج (باركود / اسم)...">
            </div>

            <div class="categories">
                <button class="cat-btn active" onclick="filterCat('all')">الكل</button>
                <button class="cat-btn" onclick="filterCat('drinks')">مشروبات</button>
                <button class="cat-btn" onclick="filterCat('food')">مأكولات</button>
                <button class="cat-btn" onclick="filterCat('electronics')">إلكترونيات</button>
            </div>

            <div class="products-grid" id="products-grid">
                </div>
        </div>

    </div>

    <script>
        // بيانات تجريبية للمنتجات
        const products = [
            { id: 1, name: "ماء معدني", price: 1.5, cat: "drinks", icon: "fa-bottle-water", color: "#3b82f6" },
            { id: 2, name: "بيبسي علبة", price: 3.0, cat: "drinks", icon: "fa-can-food", color: "#1e40af" },
            { id: 3, name: "برجر دجاج", price: 15.0, cat: "food", icon: "fa-burger", color: "#d97706" },
            { id: 4, name: "بطاطس مقلي", price: 7.0, cat: "food", icon: "fa-bowl-food", color: "#eab308" },
            { id: 5, name: "شاحن جوال", price: 45.0, cat: "electronics", icon: "fa-plug", color: "#4b5563" },
            { id: 6, name: "سماعة أذن", price: 80.0, cat: "electronics", icon: "fa-headphones", color: "#374151" },
            { id: 7, name: "قهوة ساخنة", price: 12.0, cat: "drinks", icon: "fa-mug-hot", color: "#78350f" },
            { id: 8, name: "ساندوتش تونة", price: 10.0, cat: "food", icon: "fa-bread-slice", color: "#d97706" },
            { id: 9, name: "عصير برتقال", price: 8.0, cat: "drinks", icon: "fa-glass-water", color: "#f97316" },
        ];

        let cart = [];

        // دالة عرض المنتجات
        function renderProducts(filter = 'all') {
            const grid = document.getElementById('products-grid');
            grid.innerHTML = '';

            const filtered = filter === 'all' ? products : products.filter(p => p.cat === filter);

            filtered.forEach(p => {
                grid.innerHTML += `
                    <div class="product-card" onclick="addToCart(${p.id})">
                        <div class="p-img" style="color: ${p.color}">
                            <i class="fa-solid ${p.icon}"></i>
                        </div>
                        <div class="p-name">${p.name}</div>
                        <div class="p-price">${p.price.toFixed(2)} ر.س</div>
                    </div>
                `;
            });
        }

        // دالة إضافة للسلة
        function addToCart(id) {
            const product = products.find(p => p.id === id);
            const existingItem = cart.find(item => item.id === id);

            if (existingItem) {
                existingItem.qty++;
            } else {
                cart.push({ ...product, qty: 1 });
            }
            updateCart();
        }

        // تحديث واجهة السلة
        function updateCart() {
            const container = document.getElementById('cart-items-container');
            const countBadge = document.getElementById('cart-count');
            
            if (cart.length === 0) {
                container.innerHTML = `
                <div style="text-align: center; color: #999; margin-top: 50px;">
                    <i class="fa-solid fa-basket-shopping" style="font-size: 40px; margin-bottom: 10px;"></i>
                    <p>السلة فارغة</p>
                </div>`;
                countBadge.innerText = 0;
                updateTotals();
                return;
            }

            container.innerHTML = '';
            let totalQty = 0;

            cart.forEach((item, index) => {
                totalQty += item.qty;
                container.innerHTML += `
                    <div class="cart-item">
                        <div class="item-info">
                            <h4>${item.name}</h4>
                            <span>${item.price.toFixed(2)} ر.س</span>
                        </div>
                        <div class="item-qty">
                            <button class="qty-btn" onclick="changeQty(${index}, -1)">-</button>
                            <span>${item.qty}</span>
                            <button class="qty-btn" onclick="changeQty(${index}, 1)">+</button>
                        </div>
                        <i class="fa-solid fa-trash delete-btn" onclick="removeItem(${index})"></i>
                    </div>
                `;
            });

            countBadge.innerText = totalQty;
            updateTotals();
        }

        // تغيير الكمية
        function changeQty(index, delta) {
            cart[index].qty += delta;
            if (cart[index].qty <= 0) {
                cart.splice(index, 1);
            }
            updateCart();
        }

        // حذف منتج
        function removeItem(index) {
            cart.splice(index, 1);
            updateCart();
        }

        // تحديث المجاميع
        function updateTotals() {
            const subTotal = cart.reduce((sum, item) => sum + (item.price * item.qty), 0);
            const tax = subTotal * 0.15;
            const total = subTotal + tax;

            document.getElementById('sub-total').innerText = subTotal.toFixed(2) + ' ر.س';
            document.getElementById('tax-total').innerText = tax.toFixed(2) + ' ر.س';
            document.getElementById('grand-total').innerText = total.toFixed(2) + ' ر.س';
        }

        // تصفية الفئات
        function filterCat(cat) {
            document.querySelectorAll('.cat-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            renderProducts(cat);
        }

        // تشغيل عند البدء
        renderProducts();

        // بحث بسيط
        document.getElementById('search-input').addEventListener('input', (e) => {
            const term = e.target.value.toLowerCase();
            const grid = document.getElementById('products-grid');
            grid.innerHTML = '';
            products.filter(p => p.name.includes(term)).forEach(p => {
                grid.innerHTML += `
                    <div class="product-card" onclick="addToCart(${p.id})">
                        <div class="p-img" style="color: ${p.color}"><i class="fa-solid ${p.icon}"></i></div>
                        <div class="p-name">${p.name}</div>
                        <div class="p-price">${p.price.toFixed(2)} ر.س</div>
                    </div>
                `;
            });
        });

    </script>
</body>
</html>
